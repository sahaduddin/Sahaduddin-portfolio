<!-- Preloader -->
@if (isLoading()) {
  <div id="preloader" class="fixed inset-0 bg-gradient-to-br from-indigo-600 to-purple-600 flex justify-center items-center z-[9999] transition-opacity duration-500">
    <div class="text-center text-white">
      <h2 class="text-3xl font-bold mb-6 tracking-wider animate-pulse">SAHADUDDIN</h2>
      <div class="w-12 h-12 mx-auto border-4 border-white/30 border-t-white rounded-full animate-spin"></div>
    </div>
  </div>
}

<!-- Header -->
<app-header 
  [isScrolled]="isHeaderScrolled()" 
  [isMobileMenuOpen]="isMobileMenuOpen()" 
  [activeSection]="activeSection()"
  (toggleMenu)="toggleMobileMenu()"
  (navigated)="handleNavigation()"
  (hireMeClicked)="openResumeModal()"
  />

<!-- Main Content -->
<main class="overflow-x-hidden">
  <app-hero (viewResumeClicked)="openResumeModal()" />
  <app-about />
  <app-skills />
  <app-projects (viewProject)="openProjectModal($event)" />
  <app-contact />
</main>

<!-- Footer -->
<app-footer />

<!-- Floating Action Buttons -->
<div class="fixed right-4 sm:right-8 bottom-4 sm:bottom-8 z-50 flex flex-col gap-4">
  <a href="https://wa.me/918888888888" target="_blank" class="w-14 h-14 rounded-full flex items-center justify-center bg-green-500 text-white shadow-lg hover:scale-110 hover:shadow-xl transition-transform duration-300" title="WhatsApp">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="currentColor" viewBox="0 0 16 16">
      <path d="M13.601 2.326A7.85 7.85 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.9 7.9 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.9 7.9 0 0 0 13.6 2.326zM7.994 14.521a6.6 6.6 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.56 6.56 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592m3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.1-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.73.73 0 0 0-.529.247c-.182.198-.691.677-.691 1.654s.71 1.916.81 2.049c.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943s-.182-.15-.38-.25"/>
    </svg>
  </a>
  <a href="https://linkedin.com/in/sahaduddin" target="_blank" class="w-14 h-14 rounded-full flex items-center justify-center bg-sky-600 text-white shadow-lg hover:scale-110 hover:shadow-xl transition-transform duration-300" title="LinkedIn">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" viewBox="0 0 24 24" fill="currentColor"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg>
  </a>
  @if (showScrollTop()) {
    <div (click)="scrollToTop()" class="w-14 h-14 rounded-full flex items-center justify-center bg-indigo-600 text-white shadow-lg hover:scale-110 hover:shadow-xl transition-all duration-300 cursor-pointer" title="Scroll to Top">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
        <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 15.75l7.5-7.5 7.5 7.5" />
      </svg>
    </div>
  }
</div>

<!-- Resume Modal -->
@if (isResumeModalOpen()) {
  <div class="fixed inset-0 bg-black/70 z-[9998] flex justify-center items-center p-4 animate-fade-in" (click)="closeResumeModal()">
    <div class="bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-hidden relative animate-slide-up" (click)="$event.stopPropagation()">
      <div class="bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-4 sm:p-6 flex justify-between items-center">
        <h3 class="text-xl sm:text-2xl font-bold">My Resume</h3>
        <button (click)="closeResumeModal()" class="w-9 h-9 rounded-full bg-white/20 hover:bg-white/30 hover:rotate-90 transition-transform duration-300 flex items-center justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
        </button>
      </div>
      <div class="p-2 sm:p-4 h-full">
        <div class="text-center p-8 sm:p-16 text-gray-500">
          <h2 class="text-2xl font-semibold mb-2">Resume Preview Unavailable</h2>
          <p>Please replace this with an iframe pointing to your actual resume PDF.</p>
        </div>
      </div>
    </div>
  </div>
}

<!-- Project Details Modal -->
@if (isProjectModalOpen() && selectedProject(); as project) {
  <div class="fixed inset-0 bg-black/70 z-[9998] flex justify-center items-center p-4 animate-fade-in" (click)="closeProjectModal()">
    <div class="bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-hidden relative animate-slide-up" (click)="$event.stopPropagation()">
      <div class="bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-4 sm:p-6 flex justify-between items-center">
        <h3 class="text-xl sm:text-2xl font-bold">{{ project.title }}</h3>
        <button (click)="closeProjectModal()" class="w-9 h-9 rounded-full bg-white/20 hover:bg-white/30 hover:rotate-90 transition-transform duration-300 flex items-center justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
        </button>
      </div>
      <div class="p-6 sm:p-8 overflow-y-auto max-h-[calc(90vh-80px)]">
        <h4 class="text-lg font-semibold text-gray-800 mb-2">Overview</h4>
        <p class="text-gray-600 mb-6">{{ project.details.longDescription }}</p>
        
        <h4 class="text-lg font-semibold text-gray-800 mb-3">Key Features</h4>
        <ul class="space-y-2 mb-6">
          @for (feature of project.details.features; track feature) {
            <li class="flex items-start">
              <svg class="w-5 h-5 text-green-500 mr-2 mt-0.5 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
              </svg>
              <span class="text-gray-600">{{ feature }}</span>
            </li>
          }
        </ul>
        
        <h4 class="text-lg font-semibold text-gray-800 mb-3">Technologies Used</h4>
        <div class="flex flex-wrap gap-2">
          @for(tech of project.details.technologies; track tech) {
            <span class="bg-indigo-100 text-indigo-700 text-sm font-medium px-3 py-1 rounded-full">{{ tech }}</span>
          }
        </div>

        @if (project.liveUrl && project.liveUrl !== '#') {
          <div class="mt-8 pt-6 border-t border-gray-200 flex items-center gap-4">
            <a [href]="project.liveUrl" target="_blank" class="inline-flex items-center gap-2 bg-indigo-600 text-white font-semibold px-4 py-2 rounded-lg shadow-md hover:bg-indigo-700 hover:-translate-y-0.5 transition-all duration-300">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
              </svg>
              View Live
            </a>
            <button (click)="copyProjectUrl($event, project.liveUrl)" class="relative w-10 h-10 flex items-center justify-center bg-gray-200 text-gray-600 rounded-lg hover:bg-gray-300 transition-colors duration-300" title="Copy link">
              @if (copiedUrl() === project.liveUrl) {
                <!-- Checkmark Icon -->
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
                </svg>
              } @else {
                <!-- Copy Icon -->
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                </svg>
              }
            </button>
          </div>
        }
      </div>
    </div>
  </div>
}